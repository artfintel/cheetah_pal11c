<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20170407" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>cxiview</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="cxiview_files/cxiview.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='cxiview_files/cxiviewIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="cxiview_files/cxiview.js"></script>
  </head>
  <body style="background: rgb(101, 101, 101); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 10px; margin-left: auto; margin-right: auto; margin-top: 10px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 20px; margin-top: 24px; opacity: 1.00; position: relative; width: 660px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .8em;\n\tcolor: #666666;\n\tline-height: 30px;\n\tborder-bottom: 3px solid #ccc;\n}\n\n.navbar-bg {\n\ttext-align: right;}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 5px 0px 0px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:hover\r{\r\n \tcolor: #999999;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #66ABC5;\n\ttext-decoration: none;\r}", "current-page-GUID": "F9F45654-8873-463C-8C22-1C71044FAB18", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 887px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id2" style="height: 43px; left: 25px; position: absolute; top: 16px; width: 515px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content style_External_515_43" style="padding: 0px; ">
              <div class="style">
                <div class="paragraph Header" style="padding-bottom: 0pt; padding-top: 0pt; "><div id="id1" style="height: 43px; position: relative; width: 515px; " class="style_SkipStroke shape-with-text inline-block"><div class="text-content style_External_515_43" style="padding: 0px; "><div class="style"><p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Cheetah image viewer - cxiview</p></div></div></div></div>
              </div>
              <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
            </div>
          </div>
          


          <div id="id3" style="height: 206px; left: 29px; position: absolute; top: 681px; width: 642px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_642_206" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form"><span class="style_1">cxiview</span> is a standalone image viewer for displaying data saved in .cxi files output from Cheetah.  Desgned for use with modern segmented detectors, geometry is applied on-the-fly from either Cheetah pixelmap or CrystFEL geometry files.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">cxiview can display 2D image data from almost any HDF5 file and can be run completely independently of the Cheetah GUI if desired. It is used for reviewing data quality, checking peak finding performance, finding bad regions, overlaying mask information, and anything else where looking at 2D image data is useful. It is used to display not only CXI files but also the powder patterns and masks and is an ideal replacement for <a title="http://www.desy.de/~twhite/crystfel/manual-hdfsee.html" href="http://www.desy.de/~twhite/crystfel/manual-hdfsee.html">hdfsee</a>.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">The GUI calls <span class="style_1">cxiview from the command line </span>directly as follows:<br /></p>
                <p class="Free_Form">    &gt; cxiview.py -g ../calib/geometry/current-geometry.geom -e /entry_1/data_1/data -i ../hdf5//r0059-ps2/*.cxi<br /></p>
                <p class="Free_Form"><br /></p>
              </div>
            </div>
          </div>
          


          <div style="height: 565px; width: 645px;  height: 565px; left: 27px; position: absolute; top: 87px; width: 645px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="cxiview_files/droppedImage.png" alt="" style="border: none; height: 565px; width: 646px; " />
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id4" style="height: 20px; left: 20px; position: absolute; top: 9px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content style_External_515_20" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Command line options</p>
              </div>
            </div>
          </div>
          


          <div id="id5" style="height: 317px; left: 31px; position: absolute; top: 27px; width: 637px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_637_317" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">&gt; cxiview.py -g ../calib/geometry/current-geometry.geom -e /entry_1/data_1/data -i ../hdf5//r0059-ps2/*.cxi <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">&gt; cxiview -h<br /></p>
                <p class="Free_Form">Using /reg/g/cfel/cheetah/cheetah-stable<br /></p>
                <p class="Free_Form">usage: cxiview.py [-h] [-g G] [-i I] [-e E] [-z Z] [-v V] [-l L] [-p P] [-s S]<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">CFEL CXI file viewer<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">optional arguments:<br /></p>
                <p class="Free_Form">  -h, --help  show this help message and exit<br /></p>
                <p class="Free_Form">  -g G        Geometry file (.geom/.h5)<br /></p>
                <p class="Free_Form">  -i I        Input file pattern (eg: *.cxi, LCLS*.h5)<br /></p>
                <p class="Free_Form">  -e E        HDF5 field to read<br /></p>
                <p class="Free_Form">  -z Z        Detector distance (m)<br /></p>
                <p class="Free_Form">  -v V        Photon energy (eV)<br /></p>
                <p class="Free_Form">  -l L        Read event list<br /></p>
                <p class="Free_Form">  -p P        Circle peaks by default<br /></p>
                <p class="Free_Form">  -s S        CrystFEL stream file. If the stream file is passed to the<br /></p>
                <p class="Free_Form">              program all other options except -e are ignored. The relevant<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">              information is generated automatically from the stream file.</p>
              </div>
            </div>
          </div>
          


          <div id="id6" style="height: 20px; left: 20px; position: absolute; top: 354px; width: 515px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content style_External_515_20" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Useful features</p>
              </div>
            </div>
          </div>
          


          <div id="id7" style="height: 576px; left: 31px; position: absolute; top: 378px; width: 637px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_637_576" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_1">FIle formats<br /></p>
                <p class="Free_Form">SIngle-frame HDF5 files, .cxi files, powder patterns, and many more. Should extend to include CBF, TIFF and other formats in the near future. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_1">Display any HDF5 field<br /></p>
                <p class="Free_Form">Use the -e option to specify which HDF5 field to display.<br /></p>
                <p class="Free_Form">The file pattern specified using -i gets expanded using glob, so you can recursively search for files matching a pattern and display them all at one time.  An internal event list is generated as the file list is expanded.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><span class="style_1">Geometry files<br /></span></p>
                <p class="Free_Form">Geometry is applied on-the-fly, so a geometry file is recommended. If not present data will be displayed in ‘raw’ layout as arranged in memory, which may or may not resemble the layout in real space.  The program is easily adapted to any detector where geometry should be applied to the data before display, for example using a pixelmap lookup table.   <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Geometry files can be provided as either Cheetah-style pixelmap files (.h5), or CrystFEL style Geometry files (.geom)*.<br /></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 8px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_2"><span style="font-size: 12px; " class="Bullet">*</span><span style="width: 3px; " class="inline-block"></span>Since the geometry reader is written in Python, not using the libCrystFEL interface, it may drift out of date over time.<br /></p>
                  </li>
                </ol>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_1">Stream files<br /></p>
                <p class="Free_Form">cxiview can display CrystFEL stream files provided the image data is available<br /></p>
                <p class="Free_Form">&gt; cxiview -s mystream.stream<br /></p>
                <p class="Free_Form">This enables found and predicted peaks to be overlaid and displayed, alongside the data masks for bad regions.  Very useful for verifying that your indexing results make sense. See below. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_1">Resolution rings<br /></p>
                <p class="Free_Form">Can be drawn on the image.  However there is a ‘do not lie’ mode: resolution rings will not be drawn unless sufficient information is provided to draw them accurately. This is to avoid accidentally misleading you into getting excited about a fantastic 0.5Å pattern when in fact it should have been 10Å but with the wrong detector distance used, for example.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_1">Masks<br /></p>
                <p class="Free_Form">Display the bad pixel and other masks saved with data by Cheetah.  Overlaid in semi-transparent red. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_1">Display found peaks<br /></p>
                <p class="Free_Form">Check this box to circle peaks found by Cheetah (if present).  VERY useful for making sure peak finding is working properly.  Use this option and look at your data.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_1">Display predicted peaks<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">Overlay peaks predicted by CrystFEL indexing.  Only works when a stream file is provided, but very useful for verifying that predicted peaks match the diffraction pattern acceptably.  cxiview can replace hdfsee for this purpose. </p>
              </div>
            </div>
          </div>
          


          <div id="id8" style="height: 316px; left: 31px; position: absolute; top: 1780px; width: 637px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_637_316" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">This program is continually expanding since viewer programs tend to grow additional functionality over time.  Check whether there are more options available.  Being standalone and open source you can expand it too - independently of the rest of Cheetah.   cxiview is written in python 3.5 with Qt5 for the GUI and pyqtgraph for fast image display, and is found in the python/ directory of the Git repository. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">For those who wish to re-use cxiview elsewhere, cxiview from the command line actually calls the following script so as to use the correct dependencies without affecting your global environment variables.  <br /></p>
                <p class="Free_Form">Modify to suit:<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">     &gt; less cxiview <br /></p>
                <p class="Free_Form">    #!/bin/bash<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">    CDIR=/reg/g/cfel/cheetah/cheetah-stable<br /></p>
                <p class="Free_Form">    CDEPDIR=/reg/g/cfel/dependencies<br /></p>
                <p class="Free_Form">    ADIR=/reg/g/cfel/anaconda<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">    echo Using ${CDIR}<br /></p>
                <p class="Free_Form">    export PYTHONPATH=&quot;&quot;<br /></p>
                <p class="Free_Form">    export PATH=${CDIR}/bin:${ADIR}/bin:${CDIR}/python:$PATH<br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">    /reg/g/cfel/cheetah/cheetah-latest/python/cxiview.py $@</p>
              </div>
            </div>
          </div>
          


          <div id="id9" style="height: 20px; left: 20px; position: absolute; top: 1758px; width: 515px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content style_External_515_20" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Extendable and reusable</p>
              </div>
            </div>
          </div>
          


          <div style="height: 579px; width: 661px;  height: 579px; left: 19px; position: absolute; top: 1138px; width: 661px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="cxiview_files/droppedImage_1.png" alt="" style="border: none; height: 579px; width: 662px; " />
          </div>
          


          <div id="id10" style="height: 20px; left: 25px; position: absolute; top: 1007px; width: 515px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content style_External_515_20" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">stream files</p>
              </div>
            </div>
          </div>
          


          <div id="id11" style="height: 106px; left: 29px; position: absolute; top: 1025px; width: 642px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_642_106" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Very useful for verifying that your indexing results make sense.  Enables found and predicted peaks to be overlaid and displayed, alongside the data masks for bad regions.  Red squares are found pixels.  Blue circles are predictred peaks.  Green ring is the resolution of this pattern estimated by CrystFEL. Masks can be highlighted in red overlay. Unit cell parameters for this indexing solution are printed at the bottom. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Syntax is to provide a stream file, which contains all necessary information (including geometry)<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">    &gt; cxiview -s mystream.stream</p>
              </div>
            </div>
          </div>
          <div style="height: 2096px; line-height: 2096px; " class="spacer"> </div>
        </div>
        <div style="height: 75px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
        </div>
      </div>
    </div>
  </body>
</html>


