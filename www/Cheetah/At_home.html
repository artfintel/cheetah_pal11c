<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20170405" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>At home</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="At_home_files/At_home.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='At_home_files/At_homeIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="At_home_files/At_home.js"></script>
  </head>
  <body style="background: rgb(101, 101, 101); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 10px; margin-left: auto; margin-right: auto; margin-top: 10px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 20px; margin-top: 24px; opacity: 1.00; position: relative; width: 660px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .8em;\n\tcolor: #666666;\n\tline-height: 30px;\n\tborder-bottom: 3px solid #ccc;\n}\n\n.navbar-bg {\n\ttext-align: right;}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 5px 0px 0px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:hover\r{\r\n \tcolor: #999999;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #66ABC5;\n\ttext-decoration: none;\r}\n", "current-page-GUID": "F8C4B76A-B862-4965-94C1-8EDEB181EA0E", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 322px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="height: 87px; left: 20px; position: absolute; top: 20px; width: 609px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_609_87" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Cheetah at home</p>
              </div>
            </div>
          </div>
          


          <div id="id2" style="height: 247px; left: 19px; position: absolute; top: 75px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_247" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Cheetah is divided into two separate parts:<br /></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 13px; text-indent: -13px; " class="full-width" value="1">
                    <p style="text-indent: -13px; " class="paragraph_style"><span style="font-size: 12px; " class="Bullet">1)</span><span style="width: 3px; " class="inline-block"></span>A graphical user interface for interacting with data, starting analysis jobs, monitoring status and viewing output.  This part can be installed and run very easily at home to look at data that has been copied back to your institution.<br /></p>
                  </li>
                </ol>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">and<br /></p>
                <p class="Free_Form"><br /></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 13px; text-indent: -13px; " class="full-width" value="2">
                    <p style="text-indent: -13px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">2)</span><span style="width: 3px; " class="inline-block"></span>A data processing program which runs separately, ideally on a batch farm, for performing the data processing. Installing the data processing part is more complicated and is not much use without the raw facility data (ie: XTC files).  <br /></p>
                  </li>
                </ol>
                <p class="paragraph_style_2"><br /></p>
                <p class="paragraph_style_2">Our suggestion: Install the GUI at home and use it to look at data processed at LCLS.  Use a remote connection to SLAC to process your data there then copy it home for analysis and use with the GUI locally.  <a onclick="window.open(this.href); return false;" title="https://www.globus.org" href="https://www.globus.org" onkeypress="window.open(this.href); return false;">Globus Online</a> is an excellent tool for high-volume data transfer (the <a onclick="window.open(this.href); return false;" title="https://confluence.slac.stanford.edu/display/PCDS/Using+Globus+Online" href="https://confluence.slac.stanford.edu/display/PCDS/Using+Globus+Online" onkeypress="window.open(this.href); return false;">LCLS endpoint</a> is slac#lcls).<br /></p>
                <p class="paragraph_style_2"><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><span class="style">At CFEL</span> <br /></p>
                <p class="Free_Form">&gt; module load cheetah-gui<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">&gt; cheetah-gui</p>
              </div>
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id3" style="height: 87px; left: 20px; position: absolute; top: 37px; width: 609px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_609_87" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Installing the GUI at home</p>
              </div>
            </div>
          </div>
          


          <div id="id4" style="height: 404px; left: 19px; position: absolute; top: 100px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_404" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">The Cheetah GUI is written in Python and uses a standard Anaconda python 3.x installation with PyQt4 and pyqtgraph. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><span class="style">1) Install Anaconda</span> / Python 3.x version<a title="https://www.continuum.io/downloads" href="https://www.continuum.io/downloads"><br /></a></p>
                <p class="Free_Form"><a title="https://www.continuum.io/downloads" href="https://www.continuum.io/downloads">https://www.continuum.io/downloads</a><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Make sure the following modules are installed:<br /></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 8px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_3"><span style="font-size: 12px; " class="Bullet">-</span><span style="width: 3px; " class="inline-block"></span>PyQt5   <br /></p>
                  </li>
                  <li style="line-height: 14px; padding-left: 8px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_3"><span style="font-size: 12px; " class="Bullet">-</span><span style="width: 3px; " class="inline-block"></span>pyqtgraph (not standard)<br /></p>
                  </li>
                </ol>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><span class="style">2) Download Cheetah</span> from the repository: <br /></p>
                <p class="Free_Form"><a title="https://github.com/antonbarty/cheetah" href="https://github.com/antonbarty/cheetah">    https://github.com/antonbarty/cheetah</a><br /></p>
                <p class="Free_Form">The GUI only needs the cheetah/python and cheetah/bin directories, the rest comes for ‘free’.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Ideally do a clone as this is the easiest way to stay up to date:  <br /></p>
                <p class="Free_Form">    &gt; <span class="style_1">git clone git://github.com/antonbarty/cheetah.git<br /></span></p>
                <p class="Free_Form"><span class="style_1">Master branch is the most stable version, but more out of date.<br /></span></p>
                <p class="Free_Form"><span class="style_1">Testing is where the latest improvements (and bugs) can be found.</span><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_4"><span class="style">3) Add the cheetah/bin directory to your path.</span> <br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4"><span class="style">4) Modify the cheetah-gui and cxiview scripts</span> in directory cheetah/bin. <br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">This directory contains some lightweight shell scripts which call the actual cheetah-gui.py and cxiview.py programs. <br />Having a light startup script avoids python3 installations conflicting with other things in your path.  For example: we have had bad experiences with python version clashes whenever sit-setup is included in someone’s profile, which is frequently the case at LCLS</p>
              </div>
            </div>
          </div>
          <div style="height: 504px; line-height: 504px; " class="spacer"> </div>
        </div>
        <div style="height: 761px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 96px; width: 300px;  height: 96px; left: 175px; position: absolute; top: 1px; width: 300px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="At_home_files/droppedImage.jpg" alt="" style="border: none; height: 96px; width: 300px; " />
          </div>
          


          <div id="id5" style="height: 345px; left: 19px; position: absolute; top: 107px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_345" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">These scripts enable cheetah-gui and cxiview to be called from the command line, and in practice do no more than set some paths pointing to the Anaconda/python3 installation.  <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">The LCLS versions look like this:<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_5">    #!/bin/bash<span class="style_2"><br /></span></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_7">    CDIR=/reg/g/cfel/cheetah/cheetah-stable<br /></p>
                <p class="paragraph_style_7">    ADIR=/reg/g/cfel/anaconda<br /></p>
                <p class="paragraph_style_7">    <span class="style_3">echo</span> Using ${CDIR}<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_7">    <span class="style_4">export</span> PYTHONPATH=<span class="style_5">&quot;&quot;</span><br /></p>
                <p class="paragraph_style_7">    <span class="style_4">export</span> PATH=${CDIR}/bin:${ADIR}/bin:${CDIR}/python:$PATH<br /></p>
                <p class="paragraph_style_7">    /reg/g/cfel/cheetah/cheetah-latest/python/cheetah-gui.py<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Create a copy and change it as needed to work on your home system. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_8">It should now be possible to run cheetah-gui at home.  You can select experiments, use the GUI to browse data, etc. just like at SLAC but on local data.  So it’s time to:<br /></p>
                <p class="paragraph_style_8"><br /></p>
                <p class="paragraph_style_8"><span class="style">5) Copy home all data in the cheetah folder</span><br /></p>
                <p class="paragraph_style_8">The GUI relies on all files being in a predictable location relative to the cheetah/gui directory.  It does not really matter where that is located.  So go ahead, copy the whole cheetah directory, and the GUI should be able to navigate the data. <br /></p>
              </div>
            </div>
          </div>
          


          <div id="id6" style="height: 87px; left: 20px; position: absolute; top: 505px; width: 609px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_609_87" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Running remotely at LCLS</p>
              </div>
            </div>
          </div>
          


          <div id="id7" style="height: 204px; left: 19px; position: absolute; top: 557px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_204" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Running Cheetah at SLAC is as simple as logging in to pslogin.slac.stanford.edu, changing to one of the psana machines, and ensuring X11 forwarding is enabled.  However, this can be very slow.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">A better idea is to use the NoMachine client provided by SLAC for remote data access.  <br /></p>
                <p class="Free_Form"><a title="https://confluence.slac.stanford.edu/display/PCDS/Remote+Visualization" href="https://confluence.slac.stanford.edu/display/PCDS/Remote+Visualization">https://confluence.slac.stanford.edu/display/PCDS/Remote+Visualization</a><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">It’s almost like being there.  OK, not quite, but usually much better than X11 forwarding. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">My suggestion: <br /></p>
                <p class="Free_Form">Process your XTC files at SLAC using NoMachine, and copy the data home once you’re happy with it.  This saves having to copy the (large!) XTC files home and fight installation of the psana framework on your own Linux system.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><br /></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


