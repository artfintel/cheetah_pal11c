<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20170405" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>Frequently asked questions</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="FAQ_files/FAQ.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='FAQ_files/FAQIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="FAQ_files/FAQ.js"></script>
  </head>
  <body style="background: rgb(101, 101, 101); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 10px; margin-left: auto; margin-right: auto; margin-top: 10px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 20px; margin-top: 24px; opacity: 1.00; position: relative; width: 660px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .8em;\n\tcolor: #666666;\n\tline-height: 30px;\n\tborder-bottom: 3px solid #ccc;\n}\n\n.navbar-bg {\n\ttext-align: right;}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 5px 0px 0px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:hover\r{\r\n \tcolor: #999999;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #66ABC5;\n\ttext-decoration: none;\r}\n", "current-page-GUID": "979BB67C-5A96-4816-ACD5-3D9C885ACCFE", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 75px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="height: 43px; left: 20px; position: absolute; top: 20px; width: 515px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_515_43" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Frequently asked questions</p>
              </div>
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id2" style="height: 64px; left: 24px; position: absolute; top: 116px; width: 651px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_64" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Free_Form">XTC files are read through psana, thus there is a chance that the psana.cfg file may also need modification.  This file specifies the Cheetah module to load for processing, as well as which detectors are read into Cheetah.  The detector information in particular may need to be changed for different experiment configurations and different instruments.  Hopefully this file does not need to be modified, but now you know it’s there just in case. </p>
              </div>
            </div>
          </div>
          


          <div id="id3" style="height: 20px; left: 20px; position: absolute; top: 93px; width: 515px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Q: I can not read the cspad detector</p>
              </div>
            </div>
          </div>
          


          <div style="height: 370px; width: 516px;  height: 370px; left: 92px; position: absolute; top: 191px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="FAQ_files/droppedImage.png" alt="" style="border: none; height: 370px; width: 516px; " />
          </div>
          


          <div id="id4" style="height: 20px; left: 20px; position: absolute; top: 9px; width: 515px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Q: Has something changed recently?</p>
              </div>
            </div>
          </div>
          


          <div id="id5" style="height: 33px; left: 24px; position: absolute; top: 31px; width: 651px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_33" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Free_Form">Check the <a title="Changes.html" href="Changes.html">change notes</a>.  Sometimes improvements break back-compatibility in the interests of moving forwards. </p>
              </div>
            </div>
          </div>
          <div style="height: 480px; line-height: 480px; " class="spacer"> </div>
        </div>
        <div style="height: 1490px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id6" style="height: 20px; left: 22px; position: absolute; top: 1179px; width: 515px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Q: I am getting the error </p>
              </div>
            </div>
          </div>
          


          <div id="id7" style="height: 288px; left: 26px; position: absolute; top: 1202px; width: 651px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_288" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_1">*** Constructor ***<br /></p>
                <p class="paragraph_style_1">Standard exception caught in runApp(): PSEvt::Exception: Source string cannot be parsed: 'BldInfo(:FEE-SPEC0)' [in func$<br /></p>
                <p class="paragraph_style_1">Note: Support for the FEE spectrometer was added on 24 November 2013.<br /></p>
                <p class="paragraph_style_1">This may require the following line to be added to your psana.conf file:<br /></p>
                <p class="paragraph_style_1">    feeSpectrum = BldInfo(FEE-SPEC0)<br /></p>
                <p class="paragraph_style_1">There have been reports of psana crashing with the error<br /></p>
                <p class="paragraph_style_1">Standard exception caught in runApp(): PSEvt::Exception: Source string cannot be parsed: 'BldInfo(:FEE-SPEC0)' [in func$<br /></p>
                <p class="paragraph_style_1">if this line is not present, even though a default value has been specified<br /></p>
                <p class="paragraph_style_2"><br /></p>
                <p class="paragraph_style_2"><br /></p>
                <p class="paragraph_style_2">Answer:  <br /></p>
                <p class="paragraph_style_2">We added support for the front end spectrometer in November 2013.<br /></p>
                <p class="paragraph_style_2">This is meant to pick up a default value, but sometimes it does not.<br /></p>
                <p class="paragraph_style_2"><br /></p>
                <p class="paragraph_style_2">Make sure to add the line:<br /></p>
                <p class="paragraph_style_2">    feeSpectrum = BldInfo(FEE-SPEC0)<br /></p>
                <p class="paragraph_style_2">to your psana.conf file and try again.<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id8" style="height: 344px; left: 24px; position: absolute; top: 83px; width: 651px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_344" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Note that CXI changed the detector naming convention in June 2014.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">The front CSpad detector is now called Ds2 in the data stream starting with Run 7 for cxid6214.  Ds1 will be the back detector.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Note that the Dsd name that the 2nd CSpad detector (DS2) previously had in the data stream is a holdover from quite some time ago.   Now is a good time to make this detector name clarification to avoid future confusion since the physical locations on the beamline are named:<br /></p>
                <p class="Free_Form">- DSA for the position immediately after the SC01 (aka SC2) chamber for the 100nm focus.<br /></p>
                <p class="Free_Form">- DSB for the position in front of the SC1 chamber<br /></p>
                <p class="Free_Form">- DSC for the front detector position immediately after the SC1 chamber<br /></p>
                <p class="Free_Form">- DSD for the back detector position<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">For the rest of Run 9 we expect to have the following configuration:<br /></p>
                <p class="Free_Form">- DS2 in the DSC location<br /></p>
                <p class="Free_Form">- DS1 in the DSD location<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">DS2 is our newest and best V1.6 CSpad detector.  It is believed to have ~10% better energy resolution than the DS1 detector, which is now the back detector.  The DS1 detector also has one 2x2 that does not behave quite as well with high X-ray counts.  These are the two primary reasons that motivate the switch in positions.  The switch also mitigates risk due to the poor encoder behavior observed during a couple days of the cxid2714 Neutze beamtime for the DS1 z-axis, but this seems to be resolved now.<br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">(thanks to Jason Koglin for this note)</p>
              </div>
            </div>
          </div>
          


          <div id="id9" style="height: 34px; left: 22px; position: absolute; top: 987px; width: 649px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content Normal_External_649_34" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Q: Running the cheetah gui from outside slac is painfully slow </p>
              </div>
            </div>
          </div>
          


          <div id="id10" style="height: 134px; left: 24px; position: absolute; top: 1013px; width: 651px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_134" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">It is possible to run the Cheetah GUI at SLAC over X11 forwarding from anywhere in the world.  However, this can be painfully slow at times because of X11 latency.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">An effective workaround is to use VNC or noMachine to render the graphics at SLAC and display only the compressed screen image on your monitor.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">noMachine is supported at LCLS - instructions can be found Instructions for starting an XVNC from SLAC can be found <a onclick="window.open(this.href); return false;" title="https://confluence.slac.stanford.edu/display/PCDS/Remote+Visualization" href="https://confluence.slac.stanford.edu/display/PCDS/Remote+Visualization" onkeypress="window.open(this.href); return false;" class="class1">on this SLAC confluence page</a>.<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id11" style="height: 20px; left: 19px; position: absolute; top: 458px; width: 515px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Q: Is the right data in my XTC file?</p>
              </div>
            </div>
          </div>
          


          <div id="id12" style="height: 484px; left: 23px; position: absolute; top: 483px; width: 651px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_484" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2">Check the XTC data file at a lower level.<br /></p>
                <p class="paragraph_style_2">Thanks to Andrei Salnikov for this tip:<br /></p>
                <p class="paragraph_style_2"><br /></p>
                <p class="paragraph_style_2">If you suspect that data disappeared for some reason you need to start checking event contents to see if it is really there. There are many tools which can help you to analyse XTC file contents. With psana you can run this command to dump the content of the events as it is seen by psana (probably most useful for you):<br /></p>
                <p class="paragraph_style_2"> <br /></p>
                <p class="paragraph_style_2">% psana -m EventKeys exp=cxib9213:run=8 | less<br /></p>
                <p class="paragraph_style_2">...<br /></p>
                <p class="paragraph_style_2">Event keys:<br /></p>
                <p class="paragraph_style_2">  EventKey(type=Psana::EvrData::DataV3, src=DetInfo(NoDetector.0:Evr.0))<br /></p>
                <p class="paragraph_style_2">  EventKey(type=Psana::Camera::FrameV1, src=DetInfo(CxiDg2.0:Tm6740.0))<br /></p>
                <p class="paragraph_style_2">  EventKey(type=Psana::CsPad::DataV1, src=DetInfo(CxiDs1.0:Cspad.0))<br /></p>
                <p class="paragraph_style_2">  EventKey(type=Psana::Bld::BldDataEBeamV4, src=BldInfo(EBeam))<br /></p>
                <p class="paragraph_style_2">  EventKey(type=Psana::Bld::BldDataFEEGasDetEnergy, src=BldInfo(FEEGasDetEnergy))<br /></p>
                <p class="paragraph_style_2">  EventKey(type=PSEvt::EventId)<br /></p>
                <p class="paragraph_style_2">  EventKey(type=Pds::Dgram)<br /></p>
                <p class="paragraph_style_2"> <br /></p>
                <p class="paragraph_style_2">another usefult tool is pyxtcreader, it dumps the structure of the XTC<br /></p>
                <p class="paragraph_style_2">file:<br /></p>
                <p class="paragraph_style_2"> <br /></p>
                <p class="paragraph_style_2">% pyxtcreader /reg/d/psdm/cxi/cxib9213//xtc/e334-r0008-s0* | less<br /></p>
                <p class="paragraph_style_2">....<br /></p>
                <p class="paragraph_style_2">L1Accept transition: damage=0x4000, type=0, time=1382419172.690850779, ticks=331078, fiducials=24792, control=140, vector=8657, payloadSize=5208936<br /></p>
                <p class="paragraph_style_2">  Event level: payloadSize=5208936 damage=0x4000 src=ProcInfo(Event, 31361, 172.21.26.101) contains=Xtc<br /></p>
                <p class="paragraph_style_2">    .....<br /></p>
                <p class="paragraph_style_2">    Segment level: payloadSize=4594084 damage=0x0 src=ProcInfo(Segment, 3922, 172.21.26.95) contains=Xtc<br /></p>
                <p class="paragraph_style_2">      Source level: payloadSize=4594064 damage=0x0 src=DetInfo(CxiDs1-0|Cspad-0) contains=CspadElement_V1<br /></p>
                <p class="paragraph_style_2"> <br /></p>
                <p class="paragraph_style_2"><br />Cheers,<br />Andy<br /></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


